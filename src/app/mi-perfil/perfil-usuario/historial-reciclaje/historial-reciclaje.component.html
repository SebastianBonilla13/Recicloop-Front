<div class="container  p-4">
  <!-- <h2 class="mb-4">Historial de Reciclaje</h2> -->
  
  @if (loading) {
    <div class="text-center my-5">
      <mat-spinner diameter="40" class="mx-auto"></mat-spinner>
      <p class="mt-3">Cargando historial...</p>
    </div>
  } @else if (error) {
    <div class="alert alert-danger" role="alert">
      {{ error }}
    </div>
  } @else {
    <mat-accordion>
      @for (event of recyclingEvents; track $index) {
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            
            <mat-panel-description>
              <div class="d-flex align-items-center gap-5 w-100 justify-content-center">
                <div class="d-flex align-items-center">
                  <mat-icon class="me-2">event</mat-icon>
                  {{ event.fechaRegistro | date:'dd/MM/yyyy HH:mm' }}
                </div>
                <div class="d-flex align-items-center">
                  <mat-icon class="me-1">local_drink</mat-icon>
                  {{ event.numeroBotellas }} botellas
                </div>
                <div class="d-flex align-items-center">
                  <mat-icon class="me-1">stars</mat-icon>
                  {{ event.puntosObtenidos }} puntos
                </div>
                
              </div>
            </mat-panel-description>
          </mat-expansion-panel-header>

          <div class="content-wrapper mt-3">
            <div class="stats-grid">
              <div class="stat-item">
                <mat-icon class="stat-icon">scale</mat-icon>
                <div class="stat-info">
                  <div class="stat-label">Peso Total</div>
                  <div class="stat-value">{{ event.pesoTotal }} kg</div>
                </div>
              </div>

              <div class="stat-item">
                <mat-icon class="stat-icon">pin_drop</mat-icon>
                <div class="stat-info">
                  <div class="stat-label">Punto de Reciclaje</div>
                  <div class="stat-value">ID: {{ event.puntoReciclajeId }}</div>
                </div>
              </div>
            </div>

            <mat-divider class="my-3"></mat-divider>

            <div class="text-muted small">
              Fecha de registro: {{ event.fechaRegistro | date:'full' }}
            </div>
          </div>
        </mat-expansion-panel>
      }
    </mat-accordion>
  }
</div>